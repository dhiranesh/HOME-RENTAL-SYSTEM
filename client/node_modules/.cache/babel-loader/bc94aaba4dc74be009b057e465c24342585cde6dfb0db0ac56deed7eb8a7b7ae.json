{"ast":null,"code":"import React,{useState,useContext}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';// LoginPage component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{login,isAuthenticated}=useAuth();const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{await login(email,password);// AuthContext will set isAuthenticated, and App.js might redirect\n// or we can navigate based on isAuthenticated change\n// For immediate feedback:\nnavigate(user&&user.role==='admin'?'/admin/dashboard':'/dashboard');// or to home '/ '\n}catch(err){setError(err.message||'Failed to login. Please check your credentials.');}setLoading(false);};// If user is already authenticated, redirect them from login page\nReact.useEffect(()=>{if(isAuthenticated){// Redirect to a default page after login, e.g., dashboard or home\n// Consider user role for redirection if applicable\nconst{user}=useAuth();// Re-access user state if needed for role\nnavigate(user&&user.role==='admin'?'/admin/dashboard':'/dashboard');}},[isAuthenticated,navigate,useAuth]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-center\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 bg-red-100 p-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\",children:loading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center text-sm\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-indigo-600 hover:text-indigo-500\",children:\"Register here\"})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","error","setError","loading","setLoading","login","isAuthenticated","navigate","handleSubmit","e","preventDefault","user","role","err","message","useEffect","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","disabled","to"],"sources":["C:/Users/dhira/OneDrive/Desktop/other/final house rental website/home-rental-app/client/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// LoginPage component\r\nconst LoginPage = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const { login, isAuthenticated } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n    try {\r\n      await login(email, password);\r\n      // AuthContext will set isAuthenticated, and App.js might redirect\r\n      // or we can navigate based on isAuthenticated change\r\n      // For immediate feedback:\r\n      navigate(user && user.role === 'admin' ? '/admin/dashboard' : '/dashboard'); // or to home '/ '\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to login. Please check your credentials.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // If user is already authenticated, redirect them from login page\r\n  React.useEffect(() => {\r\n    if (isAuthenticated) {\r\n      // Redirect to a default page after login, e.g., dashboard or home\r\n      // Consider user role for redirection if applicable\r\n      const { user } = useAuth(); // Re-access user state if needed for role\r\n      navigate(user && user.role === 'admin' ? '/admin/dashboard' : '/dashboard');\r\n    }\r\n  }, [isAuthenticated, navigate, useAuth]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n      <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-center\">Login</h2>\r\n        {error && <p className=\"text-red-500 bg-red-100 p-3 rounded mb-4\">{error}</p>}\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Logging in...' : 'Login'}\r\n          </button>\r\n        </form>\r\n        <p className=\"mt-4 text-center text-sm\">\r\n          Don't have an account? <Link to=\"/register\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">Register here</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}